{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function objGallery(page, names) {\n    const BASE_URL = `https://pixabay.com/api/`;\n    const API_KEY = `43257905-28a3b58ba6106b31a5e4f67d7`;\n    const PARAMS = new URLSearchParams({\n        key: API_KEY,\n        q: names,\n        image_type: `photo`,\n        orientation: `horizontal`,\n        safesearch: true,\n        page,\n        per_page: 15\n    })\n    const {data} = await axios(`${BASE_URL}?${PARAMS}`); \n   return data;\n    \n\n    \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nexport const galleryElem = document.querySelector(\".gallery-nav\");\nexport function mageTemplate(data) {\n     const markup = data.hits\n    .map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n    }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img \n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"/>\n        <div class=\"image-information\">\n        <p>Likes: ${likes}</p>\n        <p>Views: ${views}</p>\n        <p>Comments: ${comments}</p>\n        <p>Downloads: ${downloads}</p>\n        </div>\n        </a>\n        </li>`;\n    })\n    .join(\"\");\n    galleryElem.insertAdjacentHTML(\"beforeend\", markup); \n\nconst lightBox = new SimpleLightbox('.gallery a', \n{ \n  captions: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n    lightBox.refresh(); \n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { objGallery } from \"./js/pixabay-api\";\nimport { mageTemplate } from \"./js/render-functions\";\nimport { galleryElem } from \"./js/render-functions\";\n\nconst loaderElement = document.querySelector(\".loader\");\nconst formGallery = document.querySelector(\".input-field\");\nconst loadBtn = document.querySelector(\".load-more\");\n\nloadBtn.addEventListener(\"click\", loadMore);\nformGallery.addEventListener(\"submit\", FormSubmit);\n\nlet maxPage;\nlet names;\nlet page;\n\nloadBtn.classList.add(\"hidden\");\nloaderElement.classList.replace(\"loader\", \"hidden\");\nasync function FormSubmit(event) {\n    event.preventDefault();\n    galleryElem.innerHTML = \"\";\n  loaderElement.classList.replace(\"hidden\", \"loader\");\n    \n    names = event.target.elements.designation.value.trim();\n    page = 1;\n    \n    if (names === '') {\n        loaderElement.classList.replace(\"loader\", \"hidden\");\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: 'white',\n            backgroundColor: 'red',\n            position: 'bottomCenter',\n            iconColor: 'white'\n        });\n        return;\n    }\n    try {\n        const data = await objGallery(page, names);\n        if (data.totalHits === 0) {\n            loaderElement.classList.replace(\"loader\", \"hidden\");\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageColor: 'white',\n                backgroundColor: 'red',\n                position: 'bottomCenter',\n                iconColor: 'white'\n            })\n            return;\n        } else if (data.totalHits < 15) {\n            loaderElement.classList.replace(\"loader\", \"hidden\");\n              loadBtn.classList.replace(\"visible\", \"hidden\");\n            iziToast.show({\n                message: \"We`re sorry, but you've reached the end of search results.\",\n                messageColor: 'white',\n                backgroundColor: 'green',\n                position: 'bottomCenter',\n                iconColor: 'white'\n            })\n            mageTemplate(data);\n            event.target.reset();\n            return;\n        }\n     \n        iziToast.success({\n            iconColor: 'yellow',\n            message: 'Enjoy watching!',\n            position: 'topRight',\n            backgroundColor: 'blue',\n            messageColor: 'yellow'\n        });\n        mageTemplate(data);\n      \n    }\n    catch(error){\n        iziToast.show({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: 'white',\n            backgroundColor: 'red',\n            position: 'bottomCenter',\n            iconColor: 'white'\n        });\n    };\n    \n     event.target.reset();\n    loadBtn.classList.replace(\"hidden\", \"visible\");\n    loaderElement.classList.replace(\"loader\", \"hidden\");\n    \n};\n\n\n\nasync function loadMore() {\n    page += 1;\n    \n    try {\n        const data = await objGallery(page, names);\n       maxPage = Math.ceil(data.totalHits / 15);\n        console.log(data);\n        mageTemplate(data);\n         loaderElement.classList.replace(\"hidden\", \"loader\");\n        \n        if (page >= maxPage) {\n            loaderElement.classList.replace(\"loader\", \"hidden\");\n            loadBtn.classList.replace(\"visible\", \"hidden\");\n              iziToast.show({\n            message: \"We`re sorry, but you've reached the end of search results.\",\n            messageColor: 'white',\n            backgroundColor: 'green',\n            position: 'bottomCenter',\n            iconColor: 'white'\n        });\n        }\n       \n    }\n    catch (error) {\n        alert(error.message)\n    }\n     const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n    loaderElement.classList.replace(\"loader\", \"hidden\");\n};\n  "],"names":["objGallery","page","names","BASE_URL","API_KEY","PARAMS","data","axios","galleryElem","mageTemplate","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","loaderElement","formGallery","loadBtn","loadMore","FormSubmit","maxPage","event","iziToast","error","cardHeight"],"mappings":"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"}